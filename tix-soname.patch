--- tix-8.1.4/unix/tk8.4/configure.in.orig	2002-12-02 05:02:53.000000000 +0100
+++ tix-8.1.4/unix/tk8.4/configure.in	2004-03-07 11:53:37.728328792 +0100
@@ -202,23 +202,39 @@
 
     # The main Tix library
     #
-    eval "TIX_LIB_FILE=libtix${TCL_SHARED_LIB_SUFFIX}"
+    TIX_LIB_SOMAJOR=".0"
+    TIX_LIB_SOVERSION="${TIX_LIB_SOMAJOR}.0"
+    eval "TIX_LIB_FILE=libtix${TCL_SHARED_LIB_SUFFIX}${TIX_LIB_SOVERSION}"
+    eval "TIX_LIB_SONAME=libtix${TCL_SHARED_LIB_SUFFIX}${TIX_LIB_SOMAJOR}"
     TIX_MAKE_LIB="\${SHLIB_LD} -o ${TIX_LIB_FILE} \${OBJS} ${SHLIB_LD_LIBS}"
+    AC_SUBST(TIX_LIB_SONAME)
 
     # The Tcl SAM library
     #
-    eval "TCL_SAM_FILE=libtclsam${TCL_SHARED_LIB_SUFFIX}"
+    TCL_SAM_SOMAJOR=".0"
+    TCL_SAM_SOVERSION="${TCL_SAM_SOMAJOR}.0"
+    eval "TCL_SAM_FILE=libtclsam${TCL_SHARED_LIB_SUFFIX}${TCL_SAM_SOVERSION}"
+    eval "TCL_SAM_SONAME=libtclsam${TCL_SHARED_LIB_SUFFIX}${TCL_SAM_SOMAJOR}"
     TCL_MAKE_SAM="\${SHLIB_LD} -o ${TCL_SAM_FILE} \${TCL_SAM_OBJS} ${SHLIB_LD_LIBS}"
+    AC_SUBST(TCL_SAM_SONAME)
     
     # The Tk SAM library
     #
-    eval "TK_SAM_FILE=libtksam${TCL_SHARED_LIB_SUFFIX}"
+    TK_SAM_SOMAJOR=".0"
+    TK_SAM_SOVERSION="${TK_SAM_SOMAJOR}.0"
+    eval "TK_SAM_FILE=libtksam${TCL_SHARED_LIB_SUFFIX}${TK_SAM_SOVERSION}"
+    eval "TK_SAM_SONAME=libtksam${TCL_SHARED_LIB_SUFFIX}${TK_SAM_SOMAJOR}"
     TK_MAKE_SAM="\${SHLIB_LD} -o ${TK_SAM_FILE} \${TK_SAM_OBJS} ${SHLIB_LD_LIBS}"
+    AC_SUBST(TK_SAM_SONAME)
     
     # The Tix SAM library
     #
-    eval "TIX_SAM_FILE=libtixsam${TCL_SHARED_LIB_SUFFIX}"
+    TIX_SAM_SOMAJOR=".0"
+    TIX_SAM_SOVERSION="${TIX_SAM_SOMAJOR}.0"
+    eval "TIX_SAM_FILE=libtixsam${TCL_SHARED_LIB_SUFFIX}${TIX_SAM_SOVERSION}"
+    eval "TIX_SAM_SONAME=libtixsam${TCL_SHARED_LIB_SUFFIX}${TIX_SAM_SOMAJOR}"
     TIX_MAKE_SAM="\${SHLIB_LD} -o ${TIX_SAM_FILE} \${TIX_SAM_OBJS} ${SHLIB_LD_LIBS}"
+    AC_SUBST(TIX_SAM_SONAME)
 
 else
     TIX_SHLIB_CFLAGS=""
--- tix-8.1.4/unix/tk8.4/Makefile.in.orig	2004-03-07 12:05:10.874954488 +0100
+++ tix-8.1.4/unix/tk8.4/Makefile.in	2004-03-07 12:09:37.964350728 +0100
@@ -259,22 +259,26 @@
 
 $(TIX_LIB_FILE): $(OBJS)
 	rm -f $(TIX_LIB_FILE)
-	@TIX_MAKE_LIB@
+	@TIX_MAKE_LIB@ -Wl,-soname,@TIX_LIB_SONAME@
+	ln -s $(TIX_LIB_FILE) libtix$(TIX_VERSION).$(TCL_VERSION)$(SHLIB_SUFFIX)
 	$(TIX_RANLIB) $(TIX_LIB_FILE)
 
 $(TCL_SAM_FILE): $(TCL_SAM_OBJS)
 	rm -f $(TCL_SAM_FILE)
-	@TCL_MAKE_SAM@
+	@TCL_MAKE_SAM@ -Wl,-soname,@TCL_SAM_SONAME@
+	ln -s $(TCL_SAM_FILE) libtclsam$(TIX_VERSION).$(TCL_VERSION)$(SHLIB_SUFFIX)
 	$(TIX_RANLIB) $(TCL_SAM_FILE)
 
 $(TK_SAM_FILE): $(TK_SAM_OBJS)
 	rm -f $(TK_SAM_FILE)
-	@TK_MAKE_SAM@
+	@TK_MAKE_SAM@ -Wl,-soname,@TK_SAM_SONAME@
+	ln -s $(TK_SAM_FILE) libtksam$(TIX_VERSION).$(TCL_VERSION)$(SHLIB_SUFFIX)
 	$(TIX_RANLIB) $(TK_SAM_FILE)
 
 $(TIX_SAM_FILE): $(TIX_SAM_OBJS)
 	rm -f $(TIX_SAM_FILE)
-	@TIX_MAKE_SAM@
+	@TIX_MAKE_SAM@ -Wl,-soname,@TIX_SAM_SONAME@
+	ln -s $(TIX_SAM_FILE) libtixsam$(TIX_VERSION).$(TCL_VERSION)$(SHLIB_SUFFIX)
 	$(TIX_RANLIB) $(TIX_SAM_FILE)
 
 $(TIX_EXE_FILE): tixAppInit.o $(TIX_LIB_FILE)
